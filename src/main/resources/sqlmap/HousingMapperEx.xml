<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.kgc.dao.HousingMapperEx" >
  <resultMap id="BaseResultMap" type="com.kgc.pojo.HousingEx" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="community_id" property="communityId" jdbcType="INTEGER" />
    <result column="buildings_id" property="buildingsId" jdbcType="INTEGER" />
    <result column="expect_rent" property="expectRent" jdbcType="DECIMAL" />
    <result column="rent_type" property="rentType" jdbcType="INTEGER" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="phone" property="phone" jdbcType="VARCHAR" />
    <result column="state" property="state" jdbcType="INTEGER" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="create_date" property="createDate" jdbcType="TIMESTAMP" />
    <result column="create_by" property="createBy" jdbcType="INTEGER" />
    <result column="modify_date" property="modifyDate" jdbcType="TIMESTAMP" />
    <result column="modify_by" property="modifyBy" jdbcType="INTEGER" />
    <result column="community_name" property="communityName" jdbcType="VARCHAR" />
    <result column="block" property="block" jdbcType="VARCHAR" />
    <result column="uint" property="uint" jdbcType="VARCHAR" />
    <result column="room_number" property="roomNumber" jdbcType="VARCHAR" />
  </resultMap>
  <select id="getHousingExList" resultMap="BaseResultMap" parameterType="HousingEx">
    SELECT bh.id,community_id,buildings_id,expect_rent,rent_type,name,phone,state,remark,
        create_date,create_by,modify_date,modify_by,community_name,block,uint,room_number
    FROM beike_housing AS bh
    INNER JOIN beike_building AS bb ON bh.buildings_id = bb.id
	INNER JOIN beike_community AS bc ON bh.community_id = bc.id
	<where>
      <if test="createBy != null">
        and create_by = #{createBy}
      </if>
    </where>
  </select>

  <select id="getHousingExById" resultMap="BaseResultMap" parameterType="HousingEx">
    SELECT bh.id,community_id,buildings_id,expect_rent,rent_type,name,phone,state,remark,
    create_date,create_by,modify_date,modify_by,community_name,block,uint,room_number
    FROM beike_housing AS bh
    INNER JOIN beike_building AS bb ON bh.buildings_id = bb.id
    INNER JOIN beike_community AS bc ON bh.community_id = bc.id
    where bh.id = #{id}
  </select>
</mapper>